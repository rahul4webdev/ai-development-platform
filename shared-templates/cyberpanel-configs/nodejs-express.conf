# CyberPanel/OpenLiteSpeed vhostconf for Node.js Express Application
# Generated by AI Development Platform
#
# HOW TO USE:
# 1. Go to CyberPanel > Websites > {{API_DOMAIN}} > vHost Conf
# 2. Paste this configuration
# 3. Restart OpenLiteSpeed
#
# IMPORTANT: The Node.js app must be running on 127.0.0.1:5000
# Use PM2 to keep it running: pm2 start app.js --name "{{PROJECT_SLUG}}"

# External processor for Node.js
extprocessor {{PROJECT_SLUG}}_nodejs {
  type                    proxy
  address                 127.0.0.1:5000
  maxConns                100
  pcKeepAliveTimeout      60
  initTimeout             60
  retryTimeout            0
  respBuffer              0
}

# Proxy all requests to Node.js
context / {
  type                    proxy
  handler                 {{PROJECT_SLUG}}_nodejs
  addDefaultCharset       off

  extraHeaders            <<<END_extraHeaders
X-Forwarded-Proto https
X-Real-IP %{REMOTE_ADDR}e
X-Forwarded-For %{REMOTE_ADDR}e
X-Forwarded-Host %{HTTP_HOST}e
  END_extraHeaders
}
